Summary: Z39.50 Programs
Name: yaz
Version: @VERSION@
Release: 2
Requires: libxml2 openssl readline libyaz = %{version}
Copyright: YAZ License
Group: Other
Vendor: Index Data ApS <info@indexdata.dk>
Source: yaz-%{version}.tar.gz
BuildRoot: %{_tmppath}/%{name}-%{version}-root
BuildRequires: libxml2 libxml2-devel tcp_wrappers openssl-devel readline-devel
Packager: Adam Dickmeiss <adam@indexdata.dk>
URL: http://www.indexdata.dk/yaz/

%description
This package contains both a test-server and clients (normal & ssl)
for the ANSI/NISO Z39.50 protocol for Information Retrieval.

%package -n lib%{name}
Summary: Z39.50 Library
Group: Libraries
Requires: libxml2 openssl

%description -n lib%{name}
YAZ is a library for the ANSI/NISO Z39.50 protocol for Information
Retrieval.

%package -n lib%{name}-devel
Summary: Z39.50 Library - development package
Group: Development/Libraries
Requires: libyaz = %{version}

%description -n lib%{name}-devel
Development libraries and includes for the libyaz package.

%prep
%setup

%build

CFLAGS="$RPM_OPT_FLAGS" \
 ./configure --prefix=/usr --enable-shared --enable-tcpd --with-openssl
make CFLAGS="$RPM_OPT_FLAGS"

%install
rm -fr ${RPM_BUILD_ROOT}
make prefix=${RPM_BUILD_ROOT}/usr mandir=${RPM_BUILD_ROOT}/usr/share/man install

%clean
rm -fr ${RPM_BUILD_ROOT}

%files
%defattr(-,root,root)
%doc README LICENSE CHANGELOG TODO
/usr/bin/yaz-client*
/usr/bin/yaz-ztest*
/usr/bin/zoomsh*
/usr/share/man/man1/yaz-client-ssl.*
/usr/share/man/man1/yaz-client.*
/usr/share/man/man1/zoomsh.*
/usr/share/man/man8/yaz-ztest-ssl.*
/usr/share/man/man8/yaz-ztest.*

%files -n lib%{name}
/usr/lib/*.so.*
/usr/share/man/man7/yaz.*
/usr/share/yaz/etc

%files -n lib%{name}-devel
/usr/bin/yaz-config
/usr/bin/yaz-asncomp
/usr/include/yaz
/usr/lib/*.so
/usr/lib/*.a
/usr/lib/*.la
/usr/share/aclocal/yaz.m4
/usr/share/man/man1/yaz-asncomp.*
/usr/share/man/man8/yaz-config.*
/usr/share/doc/yaz
/usr/share/yaz/z39.50
/usr/share/yaz/ill
